<div class="space-y-1">
    @for (task of tasks(); track task.id) {
    <app-todo-item [task]="task" (toggle)="todoService.toggleTask(task.id)" (remove)="initiateDelete(task.id)"
        (update)="todoService.updateTask(task.id, $event)"></app-todo-item>
    } @empty {
    <div class="text-center py-12 text-gray-400">
        <p>No tasks yet. Add one above!</p>
    </div>
    }

    @if (tasks().length > 0) {
    <div class="flex justify-end mt-4">
        <button (click)="initiateClearAll()"
            class="text-sm font-medium text-red-500 hover:text-red-700 hover:bg-red-50 px-3 py-1.5 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500/20">
            Clear All
        </button>
    </div>
    }

    <app-confirmation-modal [isOpen]="taskToDelete() !== null || isClearingAll()"
        [title]="isClearingAll() ? 'Clear All Tasks' : 'Delete Task'"
        [message]="isClearingAll() ? 'Are you sure you want to delete all visible tasks? This action cannot be undone.' : 'Are you sure you want to delete this task? This action cannot be undone.'"
        [confirmText]="isClearingAll() ? 'Clear All' : 'Delete'" cancelText="Cancel" (confirm)="confirmDelete()"
        (cancel)="cancelDelete()">
    </app-confirmation-modal>
</div>